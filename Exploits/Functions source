local Budgify = {}

Budgify.newcclosure = function(func)
 local loop = coroutine.wrap(function(...)
  local tabl = {coroutine.yield()}
   while true do
     tabl = {coroutine.yield(func(unpack(tabl)))}
   end
 end)
  
  loop()
  return loop
end

Budgify.isnetworkowner = newcclosure(function(part)
  return (part.ReceiveAge == 0 and gethiddenproperty(part, "NetworkIsSleeping") == false)
end)

Budgify.setsimulationradius = newcclosure(function(num1, num2)
   sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", num1)
   sethiddenproperty(game.Players.LocalPlayer, "MaxSimulationRadius", num2)
end)

Budgify.getfflag = newcclosure(function(flag)
  return game:GetFastFlag(flag)
end)

Budgify.setfflag = newcclosure(function(flag, value)
  game:SetFastFlag(flag, value)
end)

Budgify.httpget = newcclosure(function(link)
  return request({Url = link, Method = "GET",}).Body
end)

Budgify.isreadonly = newcclosure(function(tabl)
  return table.isfrozen(tabl)
end)

Budgify.clonefunction = newcclosure(function(func)
    return function(...)
        return func(...)
    end
end)

Budgify.keypress = newcclosure(function(bytecode)
 local keycode = string.char(bytecode)
 game:GetService("VirtualInputManager"):SendKeyEvent(true, tostring(keycode), false , game)
end)

Budgify.keyrelease = newcclosure(function(Key)
    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode[Key], false, game)
end)

Budgify.mouse1press = newcclosure(function()
  local Mouse = game.Players.LocalPlayer:GetMouse()
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(Mouse.X, Mouse.Y, 0, true, game, 0)
end)

Budgify.mouse1release = newcclosure(function()
  local Mouse = game.Players.LocalPlayer:GetMouse()
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(Mouse.X, Mouse.Y, 0, false, game, 0)
end)

Budgify.mouse1click = newcclosure(function()
    mouse1press()
    mouse1release()
end)

Budgify.mouse2press = newcclosure(function()
  local Mouse = game.Players.LocalPlayer:GetMouse()
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(Mouse.X, Mouse.Y, 1, true, game, 0)
end)

Budgify.mouse2release = newcclosure(function()
 local Mouse = game.Players.LocalPlayer:GetMouse()
    game:GetService("VirtualInputManager"):SendMouseButtonEvent(Mouse.X, Mouse.Y, 1, false, game, 0)
end)

Budgify.mouse2click = newcclosure(function()
    mouse2press()
    mouse2release()
end)

Budgify.mousemoveabs = newcclosure(function(x, y)
    game:GetService("VirtualInputManager"):SendMouseWheelEvent(x, y, false, game)
end)

Budgify.mousemoverel = newcclosure(function(x, y)
    mousemoveabs(workspace.CurrentCamera.ViewportSize.X * x, workspace.CurrentCamera.ViewportSize.Y * y)
end)

Budgify.iscclosure = newcclosure(function(func)
  return debug.info(func, "s") == "[C]"
end)

Budgify.islclosure = newcclosure(function(fucn)
  return debug.info(func, "s") ~= "[C]"
end)

Budgify.cloneref = newcclosure(function(o)
  return o
end)

Budgify.getobjects = newcclosure(function(id)
  return game:GetService("InsertService"):LoadLocalAsset(id)
end)

game:GetService("UserInputService").WindowFocused:Connect(function()
    Active = true
end)

game:GetService("UserInputService").WindowFocusReleased:Connect(function()
    Active = false
end)

Budgify.isrbxactive = newcclosure(function()
  return Active
end)

Budgify.getrenderproperty = newcclosure(function(class, prop)
  return class[prop]
end)

Budgify.setrenderproperty = newcclosure(function(class, prop, val)
  class[prop] = value
end)

Budgify.getinstances = newcclosure(function()
    return game:GetDescendants()
end)

Budgify.gethwid = newcclosure(function()
  return game:GetService("RbxAnalyticsService"):GetClientId()
end)

Budgify.identifyexecutor = newcclosure(function()
  return "Budgify"
end)

Budgify.getexecutorname = newcclosure(function()
  return "Budgify 1.0"
end)

Budgify.randomstring = newcclosure(function(num)
 local str = {}
  for i = 1, num do
    str[i] = string.char(math.random(97, 122))
  end
 return table.concat(str)
end)

Budgify.gethui = newcclosure(function()
 local scr = Instance.new("ScreenGui", game.CoreGui)
 scr.Name = Budgify.randomstring(10)
 
 local scr2 = Instance.new("ScreenGui", scr)
 scr2.Name = randomstring(10)
 return scr2
end)

Budgify.hookfunction = newcclosure(function(old, hook)
    local funcName = debug.info(old, "n")
    getgenv()[funcName] = function(...)
        return hook(...)
    end
    return old
end)

Budgify.hookmetamethod = newcclosure(function(obj, method, func)
      return hookfunction(getrawmetatable(obj)[method], func)
end)

Budgify.unlockmodulescript = newcclosure(function() end)

Budgify.getcallingscript = newcclosure(function()
 local s = debug.info(1, "s")
  for i, v in next, game:GetDescendants() do
    if v:GetFullName() == s then return v end
  end
 return nil
end)

Budgify.gethiddenproperty = newcclosure(function(class, property)
   return game:GetService("UGCValidationService"):GetPropertyValue(class, property)
end)

Budgify.getmodules = newcclosure(function()
  local tabl = {}
    for _, modul in next, game:GetDescendants() do
      if modul:IsA("ModuleScript") then
        table.insert(tabl, modul)
      end
    end
  return tabl
end)

Budgify.getscripts = newcclosure(function()
  local tabl = {}
    for _, scr in next, game:GetDescendants() do
      if scr:IsA("LocalScript") then
        table.insert(tabl, scr)
      end
    end
  return tabl
end)

Budgify.iswritable = newcclosure(function(tabl)
  return not table.isfrozen(tabl)
end)

Budgify.ishooked = newcclosure(function(func)
  if typeof(func) == "function" then
    if string.len(debug.info(func, "n")) == 0 then
      return true
    end
  end
  return false
end)

Budgify.checkcaller = newcclosure(function()
  return getcallingscript() == nil
end)

Budgify.isbudgifyfunction = newcclosure(function(func)
  
end)

Budgify.getsimulationradius = newcclosure(function()
  return game.Players.LocalPlayer.SimulationRadius
end)

Budgify.setfpscap = newcclosure(function(fps: number)
  setfflag("TaskSchedulerTargetFps", tostring(fps))
end)

Budgify.getfpscap = newcclosure(function()
  return getfflag("TaskSchedulerTargetFps")
end)

Budgify.firesignal = newcclosure(function(signal)
  for _, con in next, getconnections(signal) do
    con:Fire()
  end
end)

-- setreadonly: false â€“ table = table.clone(table)
Budgify.cloneref = newcclosure(function(x)
  return x
end)

return Budgify
